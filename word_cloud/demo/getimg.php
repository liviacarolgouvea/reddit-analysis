<?php

require __DIR__ . '/../vendor/autoload.php';

use SixtyNine\WordCloud\Builder\WordCloudBuilder;
use SixtyNine\WordCloud\Renderer\WordCloudRenderer;
use SixtyNine\WordCloud\Helper\Palette;
use SixtyNine\WordCloud\FrequencyTable\FrequencyTableFactory;
use SixtyNine\WordCloud\Builder\Context\BuilderContextFactory;
use SixtyNine\WordCloud\ImageBuilder\RawImageRenderer;
use Colors\RandomColor;


/**
 * The text to build the word cloud from
 */
$text = <<<EOT
He should run the tape back on all the things he railed against Bush on that he is actually doing himself.   All hail the most transparent administration! '
Reality check:  The stock market has nothing to do with how the economy and wages are performing.  See the Fed QE program since 2009.  This is propped up the markets since the money is essentially being pumped into it.  Thus the markets are on sugar high...
I think you and I have differing definitions of respected analysts. '
Look at U6 labor participation wages record number on food assistance etc...It's also easy to improve coming from nothing but here's the catch:  It's improved DESPITE Obama and his jobs summits his ACA law his tax increases and other Kensyian methods.  N...
You know what else is a non sequitur? ABORTION! Obama killing babies amirite? (See what I did is I used words similar to your words and then transitioned into an entirely different topic making the non sequitur difficult to spot for most people.) '
I feel like cutting the corporate tax rate would not bring any money at all back to our economy but instead just increase the amount of money sent off shore. '
If you truly think the current valuations of the markets are based on sound fundamental financial principles you're listening to the wrong analysts.
Yeah like those morons who hate Obama for executing a war in violation of the war powers act for enshrining indefinite detention into law for promising openness and transparency and then prosecuting a record number of leakers and whistleblowers for denyi...
None of those things are the economy and therefore they don't matter.
[Let's run the clock back on this one too](http://www.huffingtonpost.com/2012/10/22/obama-romney-russia_n_2003927.html).That's one zinger I bet Obama wishes he could take back.
This propaganda is so thick. Are people really buying this professional wrestling act? They are robbing us blind as a team. The leaders of both parties are total globalist scumbags bought and sold a long time ago and MSNBC is owned by GE which received s...
Apparently he doesn't know the stock market doesn't have much to do with the general economy anymore.But nice try.How many of you non stockholders are richer?
Most of the people that actually hate Obama for the reasons you gave are liberals. We were talking about right wingers. You're interrupting the circle jerk!
The markets have been glutonous since QE began.  Google Kyle Bass.'
To be fair if I was president and had the FED print out 80 billion dollars a month to just give to wallstreet the stockmarket would go up. Just because the rich are getting richer doesn't change the fact that class inequality continues to grow.And becaus...
&gt;  That's kind of like looking at the exterior of a car and being able to determine the engine is running just fine.Terrible analogy. Looking at the exterior of a car is probably the best indicator of how well the engine runs. If the exterior is immac...
All owned by the Big banking families that privately produce and distribute our currency. 'Federal reserve' is nothing but a cover up name for a private business that prints money with no backing
&gt;  for continuing warrantless spying on AmericansGot a source to provide some proof of that? It is widely known that warrantless wiretaps occurred under Bush. But my understanding of the available information is that Obama's domestic spying falls with...
Mostly racism though.'
Right but I wasn't talking about Obama's most moronic critics I was talking about Obama's most thoughtful critics./r/politics seems to really dislike talking about thoughtful criticism of Obama and focus instead on idiots and pretend that all of Obama's ...
[Here's some reality I bet Obama wishes he could take back](http://www.huffingtonpost.com/2012/10/22/obama-romney-russia_n_2003927.html).
You gonna blame Republicans in Congress for an executive order?https://www.aclu.org/national-security/president-obama-issues-executive-order-institutionalizing-indefinite-detention'
https://www.aclu.org/national-security/fix-fisa-end-warrantless-wiretappingThat plus national security letters used to secretly spy on people without any warrant.'
Are we pretending republicans who hate him are the only people who hate him?'
Problem is is that many of those respected analysts have been predicting a stock market downturn and runaway inflation for a while. It's just sad now. '
I'm not talking about conservatives and I don't know why we always conflate people who dislike Obama with conservatives.There are very very very legitimate reasons not to like Obama.'
Without a doubt.'
The people I was responding to were commenting simply about people who hate Obama and were specifically talking about there being all sorts of reasons people hated Obama and implying none were rational.'
The previous comment was always valid.People who hate Obama for the reasons I listed cannot be countered with reality . . . because reality is the reason they hate Obama.You think the family of that teenage boy who was born in Denver and got drone-bombed...
Let's see some playbacks of his end the war lies'
Not surprisingly Obama did not ask anyone to run the tape back on his ACA promises (if you like your plan you can keep it) or his promise to me the most transparent administration ever. Or his previous statements about abuse of executive actions or his p...
Have I objected to any legislation?I'm just saying that Obama has voted for more legislation that Republicans supported than /r/politics likes to admit.
so.... why does he get the credit for the stock market? '
The stock market is a result of money creation by the Fed. Most Americans are not enjoying the benefits of this which is why income inequality keeps increasing. It's easy to make money when you can borrow at 0% from the Fed. Only problem is that they are...
Great job President Obama!!!! Your the best President we have had in decades!!!I voted for you twice and I feel proud to say so.'
Can you help me out and show me what in that article is proof? I followed some of the links and it seems to talk about things like Americans being inadvertently caught up in international surveillance. I'm looking for something that supports your stateme...
The first link in the article I provided has good bullet points to help:https://www.aclu.org/nsa-surveillance-procedures&gt; I'm looking for something that supports your statement which makes it sound like it is widespread and specifically targeting Amer...
And when the stocks took a huge dump he was the guy who said not to judge the recovery based on where the market was. Hmm. '
[deleted]'
[deleted]'
[deleted]'
[deleted]'
The 2nd grade logic in here is too much to bear.'
Well if you take it from the point that Obama took office of course it's better.  It was the Great Recession.  That's comparing the state of a building that's actually on fire to itself a few days later. However there are systemic issues with the current...
GOP:  .....but he is still black..... so there is no amount of success that will make up for that ....'
It wasn't an entirely serious comment but not an entirely facetious one either. I consume a lot of conservative news media. I watch Fox listen to talk radio and read articles from conservative sites. They absolutely attribute every problem they can to Ob...
But he got us out of the Great Recession.'
What a curious response.  '
This is all controlled by central banking.The President of the United States has zero to do with what's going on with the stock market.
&gt; He's also a regular poster on /r/conservative[1] What a load of crap.  Where you do you get this stuff about me?  I bring up criticisms of Obama by the ACLU and I get accused of being conservative.I just checked my comment karma breakdown.  I've got...
My argument was about valid criticisms of Obama and nobody seems to have been able to refute them.'
Cool but I wasn't responding to the article I was commenting in a thread where people were making general statements about Obama's critics.
Do you think the ACLU was lying about Obama signing the executive order?The fact that the link was an ACLU article about Obama doing it doesn't mean it didn't happen:http://www.washingtonpost.com/wp-dyn/content/article/2011/03/07/AR2011030704890.htmlI do...
No he hasnt. Nothing he has done is good for wall street.The fed which is apolitical has been great for wall street.'
I assumed he meant rust but rut makes sense here.'
In that case you must be mad as hell about the things the GOP does.Hello? Hello? '
Stocks go up when your money is worth less. '
As the other person pointed out you're correct. The stock market really has nothing to do with the economy. It does in the sense of traditional Y=C+I+G-(X+M) {output =  consumption plus investment/saving plus government spending minus (or plus) imports/e...
When the boomers start selling their homes. We've got too many suburban ranches and McMansions for the generation behind them. And while wages were stagnant before then it doesn't mean they needed to be stagnant now. Companies are flush with cash and bor...
His foreign policy is disgusting. Expanding war in what 7 Muslim nations? Stepping up ineffective drone strikes that kill innocent people?'
donvotes are because you're supposed to tout Obama's successes and ignore his failures. You did it backwards.
I wonder what has a larger impact on the economy: The stock market closing on one specific day or the fact he doubled the deficit. That requires logic and not emotional knee jerk reactions so I'm not sure if y'all will get the right answer. Hey look ther...
Where would you find this? MSNBC of course. It's nice to see that Reddit has a cable network. The stock market is on steroids and they are called QE infinity. I pity the fool who thinks the DJIA = economic anything except for wall st.
YAY!!! During the Bush and Obama administrations a stock bubble has been created by pumping the markets with free money and holding interest rates at zero. Who would have guessed stocks would have gone up artificially? Crazy talk. Bush was so smart. Obam...
Yah and since the stock market is his only real metric highlights how bad he's actually handling the economy. That's like saying a patient is healthy because they are breathing. 
I would never blame or credit Obama with anything since the President is just PR for the military industrial complex.However I do love how he talks some shit!'
The same Obama that is going back to war and going after whistleblowers? Clearly this is the best Obama.'
&gt;Republicans care more about hating someone for the color of their skin than the country that elects them to Govern.  I know right? Like all those black republicans and republican supporters are actually white people doing black face. That way the par...
that's got shit to do with the current economic situation. unemployment is based on how many people are claiming benefits and doesn't include people who have used all theirs already or have given up trying to find work and don't apply for them.labor part...
Too bad he lied about tons of other stuff'
Thats the kind of mentality that lets them get away with this fucking shit.  But if it was the GOP it would be worse!! No shut the fuck up its not about being better than the other guy its about being better for our country.  So stop with that terrible t...
I don't think he really wants us to run all the tapes back. Just the one on the economy. Not the one on transparency in Washington. We can forget that tape...
That's great. He also took the most money from Wall Street donations than any candidate ever. And surprise Wall Street had no penalties. Oh and it's been 7 years about him trying to reform capital gain. Nada.Close loopholes for tax off-shore havens corpo...
Too bad policy didnt have anything to do with the recovery. If the Fed had not have pumped money into the system to prop up the stock market (which it is still currently doing with its guidance every quarter and cheap borrowing costs) then it would have ...
its actually comical that people still believe in Obama'
If we're going to roll back to things being outlandishly wrong how about any of your campaign promises Mr President?
Can this sub jerk it any harder?'
&gt; and be white or at least east asian but ideally white-shrugs- I don't really think a vast majority of republican voters are racist. Often they'll be libertarian or maybe just extremely pro-life. In any event I can't say I agree that he'd need to be ...
They're both bad. One is more open about it than the other. That doesn't negate my point though. You're *not* going to see some new new deal come out of the Dems. Most of them are to the right of Nixon these days and they're only going to get more to the...
&gt;Most of them are to the right of Nixon these days and they're only going to get more to the right down the road.Here's where you're wrong. History tends to be cyclical.In the late 1800s the government was overwhelmingly (what we would now call) conse...
If you're going to take credit for the success of something you had better be ready to take the blame for it's failure.
Right. Wall Street is doing great. Trillions spent. 6 million thrown off their healthcare plans and forced into the exchanges millions more penalized in 2015 and still 35 million plus uninsured. Lowest labor participation rate in the last 50 years with r...
Yeah but Mr. Obama if we run the tape back then we might find out how much you lied to us about war surveillance and whistleblowing. Thanks for being a hypocrite dickhead.'
EOT;

/**
 * The TrueType font to use
 */
$font = __DIR__ . '/../fonts/Arial.ttf';

/**
 * Dimensions of the resulting image
 */
$img_width = $_GET['w'];

$img_height = $_GET['h'];

/**
 * The color palette to use
 */

$colors = RandomColor::many(30, array(
    'luminosity' => 'bright',
    'hue' => array('purple'),
));
$palette = Palette::getPaletteFromHex($colors);

/**
 * Create a frequency table from the text
 */
$ft = FrequencyTableFactory::getDefaultFrequencyTable($text);

/**
 * Setup the cloud builder and build the word cloud
 */
$builder = new WordCloudBuilder(
    $ft,
    BuilderContextFactory::getDefaultBuilderContext($ft, $palette, $font, $img_width, $img_height),
    array(
        'font' => $font,
        'size' => array($img_width, $img_height)
    )
);
$cloud = $builder->build(20);

/**
 * Render the word cloud image
 */
$renderer = new WordCloudRenderer();

$imgRenderer = new RawImageRenderer($cloud, $renderer);

header('Content-type: image/png');
echo $imgRenderer->getImage();
